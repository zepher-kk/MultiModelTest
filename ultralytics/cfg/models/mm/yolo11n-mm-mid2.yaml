# Ultralytics YOLO11 ğŸš€ MultiModal Triple Mid-level Fusion Configuration
# YOLOMM RGB+XäºŒå…ƒæ¨¡æ€åŒå±‚çº§ä¸­æœŸèåˆé…ç½®
# ç­–ç•¥ï¼šRGBå’ŒXæ¨¡æ€ç‹¬ç«‹ç‰¹å¾æå–ï¼Œåœ¨P3å’ŒP4ä¸¤ä¸ªå±‚çº§è¿›è¡Œèåˆ
# é€‚ç”¨åœºæ™¯ï¼šéœ€è¦å¤šå±‚çº§ç‰¹å¾èåˆï¼Œå……åˆ†åˆ©ç”¨ä¸åŒå°ºåº¦çš„æ¨¡æ€äº’è¡¥ä¿¡æ¯

# Parameters
nc: 80 # number of classes
scales: # model compound scaling constants, i.e. 'model=yolo11n.yaml' will call yolo11.yaml with scale 'n'
  # [depth, width, max_channels]
  n: [0.50, 0.25, 1024] # YOLO11n summary: 319 layers, 2624080 parameters, 2624064 gradients, 6.6 GFLOPs
  s: [0.50, 0.50, 1024] # YOLO11s summary: 319 layers, 9458752 parameters, 9458736 gradients, 21.7 GFLOPs
  m: [0.50, 1.00, 512]  # YOLO11m summary: 409 layers, 20114688 parameters, 20114672 gradients, 68.5 GFLOPs
  l: [1.00, 1.00, 512]  # YOLO11l summary: 631 layers, 25372160 parameters, 25372144 gradients, 87.6 GFLOPs
  x: [1.00, 1.50, 512]  # YOLO11x summary: 631 layers, 56966176 parameters, 56966160 gradients, 196.4 GFLOPs

# å¤šæ¨¡æ€æ¶æ„å®šä¹‰ - åŒå±‚çº§ä¸­æœŸèåˆ
# Xæ¨¡æ€ç±»å‹ç”±æ•°æ®é›†é…ç½®æˆ–è®­ç»ƒæ—¶æŒ‡å®šï¼Œæ¨¡å‹æ¶æ„ä¿æŒé€šç”¨æ€§

# åŒè·¯å¾„ backbone - RGBè·¯å¾„å’ŒXè·¯å¾„ç‹¬ç«‹æå–ç‰¹å¾
backbone:
  # RGBè·¯å¾„åˆ°P3 (å±‚0-4) - æå–RGBç‰¹å¾åˆ°P3çº§åˆ«
  - [-1, 1, Conv, [64, 3, 2], 'RGB']      # 0-P1/2 RGBè·¯å¾„èµ·å§‹
  - [-1, 1, Conv, [128, 3, 2]]            # 1-P2/4
  - [-1, 2, C3k2, [256, False, 0.25]]     # 2
  - [-1, 1, Conv, [256, 3, 2]]            # 3-P3/8  
  - [-1, 2, C3k2, [512, False, 0.25]]     # 4 RGB P3ç‰¹å¾

  # Xè·¯å¾„åˆ°P3 (å±‚5-9) - æå–Xæ¨¡æ€ç‰¹å¾åˆ°P3çº§åˆ«
  - [-1, 1, Conv, [64, 3, 2], 'X']        # 5-P1/2 Xè·¯å¾„èµ·å§‹
  - [-1, 1, Conv, [128, 3, 2]]            # 6-P2/4
  - [-1, 2, C3k2, [256, False, 0.25]]     # 7
  - [-1, 1, Conv, [256, 3, 2]]            # 8-P3/8
  - [-1, 2, C3k2, [512, False, 0.25]]     # 9 X P3ç‰¹å¾

  # ç¬¬ä¸€æ¬¡ä¸­æœŸèåˆå±‚ (å±‚10-12) - èåˆRGBå’ŒXçš„P3çº§ç‰¹å¾
  - [[4, 9], 1, Concat, [1]]              # 10 èåˆRGB(å±‚4)å’ŒX(å±‚9)çš„P3ç‰¹å¾
  - [-1, 2, C3k2, [512, True]]            # 11 èåˆç‰¹å¾å¤„ç†
  - [-1, 1, C2PSA, [512]]                 # 12 æ³¨æ„åŠ›å¢å¼ºP3èåˆç‰¹å¾

  # RGBè·¯å¾„ç»§ç»­åˆ°P4 (å±‚13-15)
  - [4, 1, Conv, [512, 3, 2]]             # 13-P4/16 ä»RGB P3ç»§ç»­
  - [-1, 2, C3k2, [512, True]]            # 14
  - [-1, 1, SPPF, [512, 5]]               # 15 RGB P4ç‰¹å¾

  # Xè·¯å¾„ç»§ç»­åˆ°P4 (å±‚16-18)
  - [9, 1, Conv, [512, 3, 2]]             # 16-P4/16 ä»X P3ç»§ç»­
  - [-1, 2, C3k2, [512, True]]            # 17
  - [-1, 1, SPPF, [512, 5]]               # 18 X P4ç‰¹å¾

  # ç¬¬äºŒæ¬¡ä¸­æœŸèåˆå±‚ (å±‚19-21) - èåˆRGBå’ŒXçš„P4çº§ç‰¹å¾
  - [[15, 18], 1, Concat, [1]]            # 19 èåˆRGB(å±‚15)å’ŒX(å±‚18)çš„P4ç‰¹å¾
  - [-1, 2, C3k2, [1024, True]]           # 20 èåˆç‰¹å¾å¤„ç†
  - [-1, 2, C2PSA, [1024]]                # 21 æ³¨æ„åŠ›å¢å¼ºP4èåˆç‰¹å¾

# æ£€æµ‹å¤´ - åŸºäºåŒå±‚çº§èåˆç‰¹å¾çš„å¤šå°ºåº¦æ£€æµ‹å¤´
head:
  # P4/16åˆ†æ”¯ - ä»P4èåˆç‰¹å¾å¼€å§‹
  - [-1, 1, nn.Upsample, [None, 2, "nearest"]]   # 22 P4èåˆç‰¹å¾ä¸Šé‡‡æ · 40Ã—40 â†’ 80Ã—80
  - [[-1, 12], 1, Concat, [1]]                   # 23 ä¸P3èåˆç‰¹å¾è¿æ¥
  - [-1, 2, C3k2, [512, False]]                  # 24 å¤„ç†P4ç‰¹å¾ (80Ã—80)

  # P3/8åˆ†æ”¯ - ç»§ç»­ä¸Šé‡‡æ ·
  - [-1, 1, nn.Upsample, [None, 2, "nearest"]]   # 25 ç»§ç»­ä¸Šé‡‡æ · 80Ã—80 â†’ 160Ã—160  
  - [-1, 2, C3k2, [256, False]]                  # 26 å¤„ç†P3ç‰¹å¾ (160Ã—160)

  # P4/16åˆ†æ”¯å›è¿
  - [-1, 1, Conv, [256, 3, 2]]                   # 27 ä¸‹é‡‡æ · 160Ã—160 â†’ 80Ã—80
  - [[-1, 24], 1, Concat, [1]]                   # 28 èåˆP4ç‰¹å¾ (80Ã—80 + 80Ã—80)
  - [-1, 2, C3k2, [512, False]]                  # 29 æœ€ç»ˆP4ç‰¹å¾ (80Ã—80)

  # P5/32åˆ†æ”¯å›è¿  
  - [-1, 1, Conv, [512, 3, 2]]                   # 30 ä¸‹é‡‡æ · 80Ã—80 â†’ 40Ã—40
  - [[-1, 21], 1, Concat, [1]]                   # 31 èåˆåŸå§‹P4èåˆç‰¹å¾ (40Ã—40 + 40Ã—40)
  - [-1, 2, C3k2, [1024, False]]                 # 32 æœ€ç»ˆP5ç‰¹å¾ (40Ã—40)

  - [[26, 29, 32], 1, Detect, [nc]]              # 33 Detect(P3, P4, P5)
