# Ultralytics YOLO11 ğŸš€ MultiModal Late Fusion Configuration
# YOLOMM RGB+XäºŒå…ƒæ¨¡æ€æ™šæœŸèåˆé…ç½®
# ç­–ç•¥ï¼šRGBå’ŒXæ¨¡æ€å®Œå…¨ç‹¬ç«‹å¤„ç†ï¼Œåœ¨æ£€æµ‹ç»“æœå±‚é¢è¿›è¡Œå†³ç­–èåˆ
# é€‚ç”¨åœºæ™¯ï¼šRGBå’ŒXæ¨¡æ€å·®å¼‚æå¤§ï¼Œå„è‡ªç‹¬ç«‹æ£€æµ‹åèåˆå†³ç­–

# Parameters
nc: 80 # number of classes
scales: # model compound scaling constants, i.e. 'model=yolo11n.yaml' will call yolo11.yaml with scale 'n'
  # [depth, width, max_channels]
  n: [0.50, 0.25, 1024] # YOLO11n summary: 319 layers, 2624080 parameters, 2624064 gradients, 6.6 GFLOPs
  s: [0.50, 0.50, 1024] # YOLO11s summary: 319 layers, 9458752 parameters, 9458736 gradients, 21.7 GFLOPs
  m: [0.50, 1.00, 512]  # YOLO11m summary: 409 layers, 20114688 parameters, 20114672 gradients, 68.5 GFLOPs
  l: [1.00, 1.00, 512]  # YOLO11l summary: 631 layers, 25372160 parameters, 25372144 gradients, 87.6 GFLOPs
  x: [1.00, 1.50, 512]  # YOLO11x summary: 631 layers, 56966176 parameters, 56966160 gradients, 196.4 GFLOPs

# å¤šæ¨¡æ€æ¶æ„å®šä¹‰ - é€šç”¨RGB+XäºŒå…ƒæ¨¡æ€
# Xæ¨¡æ€ç±»å‹ç”±æ•°æ®é›†é…ç½®æˆ–è®­ç»ƒæ—¶æŒ‡å®šï¼Œæ¨¡å‹æ¶æ„ä¿æŒé€šç”¨æ€§

# åŒè·¯å¾„ backbone - RGBè·¯å¾„å’ŒXè·¯å¾„å®Œå…¨ç‹¬ç«‹
backbone:
  # RGBè·¯å¾„ (å±‚0-10) - å®Œæ•´çš„RGBç‰¹å¾æå–
  - [-1, 1, Conv, [64, 3, 2], 'RGB']      # 0-P1/2 RGBè·¯å¾„èµ·å§‹
  - [-1, 1, Conv, [128, 3, 2]]            # 1-P2/4
  - [-1, 2, C3k2, [256, False, 0.25]]     # 2
  - [-1, 1, Conv, [256, 3, 2]]            # 3-P3/8  
  - [-1, 2, C3k2, [512, False, 0.25]]     # 4
  - [-1, 1, Conv, [512, 3, 2]]            # 5-P4/16
  - [-1, 2, C3k2, [512, True]]            # 6
  - [-1, 1, Conv, [1024, 3, 2]]           # 7-P5/32
  - [-1, 2, C3k2, [1024, True]]           # 8
  - [-1, 1, SPPF, [1024, 5]]              # 9
  - [-1, 2, C2PSA, [1024]]                # 10 RGBè·¯å¾„ç»“æŸ

  # Xè·¯å¾„ (å±‚11-21) - å®Œæ•´çš„Xæ¨¡æ€ç‰¹å¾æå–
  - [-1, 1, Conv, [64, 3, 2], 'X']        # 11-P1/2 Xè·¯å¾„èµ·å§‹ï¼ˆfrom=-1ä½†å®é™…ä»Xæ¨¡æ€è¾“å…¥ï¼‰
  - [-1, 1, Conv, [128, 3, 2]]            # 12-P2/4
  - [-1, 2, C3k2, [256, False, 0.25]]     # 13
  - [-1, 1, Conv, [256, 3, 2]]            # 14-P3/8
  - [-1, 2, C3k2, [512, False, 0.25]]     # 15
  - [-1, 1, Conv, [512, 3, 2]]            # 16-P4/16  
  - [-1, 2, C3k2, [512, True]]            # 17
  - [-1, 1, Conv, [1024, 3, 2]]           # 18-P5/32
  - [-1, 2, C3k2, [1024, True]]           # 19
  - [-1, 1, SPPF, [1024, 5]]              # 20
  - [-1, 2, C2PSA, [1024]]                # 21 Xè·¯å¾„ç»“æŸ

# ç‹¬ç«‹æ£€æµ‹å¤´ - RGBå’ŒXæ¨¡æ€å„è‡ªç‹¬ç«‹æ£€æµ‹ï¼Œæœ€åèåˆå†³ç­–
head:
  # RGBæ£€æµ‹åˆ†æ”¯ (å±‚22-33)
  - [10, 1, nn.Upsample, [None, 2, "nearest"]]   # 22 ä»RGB backbone
  - [[-1, 6], 1, Concat, [1]]                    # 23 cat RGB backbone P4
  - [-1, 2, C3k2, [512, False]]                  # 24

  - [-1, 1, nn.Upsample, [None, 2, "nearest"]]   # 25
  - [[-1, 4], 1, Concat, [1]]                    # 26 cat RGB backbone P3
  - [-1, 2, C3k2, [256, False]]                  # 27 (RGB P3/8-small)

  - [-1, 1, Conv, [256, 3, 2]]                   # 28
  - [[-1, 24], 1, Concat, [1]]                   # 29 cat RGB head P4
  - [-1, 2, C3k2, [512, False]]                  # 30 (RGB P4/16-medium)

  - [-1, 1, Conv, [512, 3, 2]]                   # 31
  - [[-1, 10], 1, Concat, [1]]                   # 32 cat RGB backbone P5
  - [-1, 2, C3k2, [1024, True]]                  # 33 (RGB P5/32-large)

  # Xæ¨¡æ€æ£€æµ‹åˆ†æ”¯ (å±‚34-45)
  - [21, 1, nn.Upsample, [None, 2, "nearest"]]   # 34 ä»X backbone
  - [[-1, 17], 1, Concat, [1]]                   # 35 cat X backbone P4
  - [-1, 2, C3k2, [512, False]]                  # 36

  - [-1, 1, nn.Upsample, [None, 2, "nearest"]]   # 37
  - [[-1, 15], 1, Concat, [1]]                   # 38 cat X backbone P3
  - [-1, 2, C3k2, [256, False]]                  # 39 (X P3/8-small)

  - [-1, 1, Conv, [256, 3, 2]]                   # 40
  - [[-1, 36], 1, Concat, [1]]                   # 41 cat X head P4
  - [-1, 2, C3k2, [512, False]]                  # 42 (X P4/16-medium)

  - [-1, 1, Conv, [512, 3, 2]]                   # 43
  - [[-1, 21], 1, Concat, [1]]                   # 44 cat X backbone P5
  - [-1, 2, C3k2, [1024, True]]                  # 45 (X P5/32-large)

  # ç‹¬ç«‹æ£€æµ‹è¾“å‡º
  - [[27, 30, 33], 1, Detect, [nc]]              # 46 RGBæ£€æµ‹ç»“æœ(P3, P4, P5)
  - [[39, 42, 45], 1, Detect, [nc]]              # 47 Xæ£€æµ‹ç»“æœ(P3, P4, P5)

  # å†³ç­–èåˆå±‚ (å¯é€‰ï¼Œå¦‚æœéœ€è¦èåˆä¸¤ä¸ªæ£€æµ‹ç»“æœ)
  # - [[-2, -1], 1, DecisionFusion, []]          # 48 èåˆRGBå’ŒXçš„æ£€æµ‹ç»“æœ

# æ™šæœŸèåˆé…ç½®ä¼˜åŠ¿ï¼š
# 1. å®Œå…¨ç‹¬ç«‹ï¼šRGBå’ŒXæ¨¡æ€å®Œå…¨ç‹¬ç«‹å¤„ç†ï¼Œæ— ç›¸äº’å¹²æ‰°
# 2. å¹¶è¡Œè®¡ç®—ï¼šä¸¤æ¡è·¯å¾„å¯ä»¥å®Œå…¨å¹¶è¡Œï¼Œè®¡ç®—æ•ˆç‡é«˜
# 3. é²æ£’æ€§å¼ºï¼šå•ä¸€æ¨¡æ€å¤±æ•ˆä¸å½±å“å¦ä¸€æ¨¡æ€çš„æ£€æµ‹
# 4. çµæ´»èåˆï¼šå¯ä»¥åœ¨æ¨ç†æ—¶æ ¹æ®åœºæ™¯é€‰æ‹©èåˆç­–ç•¥
# 5. é€‚åˆåœºæ™¯ï¼šRGBå’ŒXæ¨¡æ€å·®å¼‚æå¤§ï¼Œå„è‡ªæœ‰ç‹¬ç‰¹ä¼˜åŠ¿çš„æƒ…å†µ
